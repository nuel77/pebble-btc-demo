<!--
=========================================================
 Paper Dashboard 2 - v2.0.0
=========================================================

 Product Page: https://www.creative-tim.com/product/paper-dashboard-2
 Copyright 2019 Creative Tim (https://www.creative-tim.com)
 Licensed under MIT (https://github.com/creativetimofficial/paper-dashboard/blob/master/LICENSE)

 Coded by Creative Tim

=========================================================

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. -->


<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8"/>
    <link href="assets/img/apple-icon.png" rel="apple-touch-icon" sizes="76x76">
    <link href="assets/img/favicon.png" rel="icon" type="image/png">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"/>
    <title>
        Pebble Bitcoin Exchange
    </title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no'
          name='viewport'/>
    <!--     Fonts and icons     -->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700,200" rel="stylesheet"/>
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://rawgit.com/schmich/instascan-builds/master/instascan.min.js"></script>
    <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
    <script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>
    <!-- CSS Files -->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="assets/css/paper-dashboard.css?v=2.0.0" rel="stylesheet"/>
    <!-- CSS Just for demo purpose, don't include it in your project -->
    <link href="assets/demo/demo.css" rel="stylesheet"/>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script>

    <style>
        input[type=number]::-webkit-inner-spin-button,
        input[type=number]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
    </style>
</head>

<body class="">
<script>
    const global_var = {
        token: "",
        pebblePublicKey: "",
        api_endpoint: "https://api.blockcypher.com/v1/btc/",
    };
    fetch('/getToken')
        .then(res => res.text()
        ).then((res) => {
        global_var.token = res
    });
    fetch('/getPebblePublicKey')
        .then(res => res.text())
        .then(res => {
            //console.log(res)
            global_var.pebblePublicKey = res
        });

    // console.log(global_var)


    Swal.fire({
        grow: 'fullscreen',
        title: 'Welcome To Pebble',
        allowOutsideClick: false,
        allowEscapeKey: false,
        text: 'Select Network',
        footer: 'Get ready for the fastest DLT in the World',
        imageUrl: "pebble-icon.svg",
        input: 'select',
        inputOptions: {
            main: 'Bitcoin Main Network',
            test3: 'Bitcoin Test Network 3',
        },
        confirmButtonText: 'Proceed',
        inputValidator: (value) => {
            return new Promise((resolve) => {
                resolve()
            })
        }
    }).then((res) => {
        let netType = res.value;
        global_var.networkType = netType;
        //console.log(global_var);
        let arr = Swal.fire({

            allowOutsideClick: false,
            allowEscapeKey: false,
            grow: 'fullscreen',
            confirmButtonText: 'Submit',
            title: "",

            html:
                '<video id="preview" width="320" height="240"></video>' +
                '<div class="label"><span title="What do u wanna write here?"><h5>Enter Public Key</h5> </span></div>' +
                '<form><input required="required" id="swal-input1" class="swal2-input" style="width: 40%"> <br>',


            footer: '<button type="button" id="newKey" class="swal2-confirm swal2-styled" onclick="generatePublicKey()" style="display: inline-block; border-left-color: rgb(48, 133, 214); border-right-color: rgb(48, 133, 214); background-color:#5cb85c;">Generate New Public Key</button>' +
                '<button type="button" id="scan" onclick="scanner()" class="swal2-styled swal2-cancel">Scan Public Key QR Code</button>',

            preConfirm: () => {
                global_var.userPublicKey = document.getElementById('swal-input1').value;
                //generateMultisignAddress();
                if (!global_var.userPublicKey) {
                    Swal.showValidationMessage(
                        "Public Key cannot be left blank"
                    )
                } else {
                    return {
                        networkType: netType,
                        publicKey: document.getElementById('swal-input1').value,
                    }
                }
            },
        });

        return arr
    }).then((res) => {

        console.log(res)
        console.log(global_var)
    });
    let scan = 1;

    function scanner() {
        let scanner = new Instascan.Scanner({video: document.getElementById('preview')});
        scanner.addListener('scan', function (content) {

            content = content.replace("bitcoin:", "");
            document.getElementById('swal-input1').value = content;
            scanner.stop();
            document.getElementById("preview").style.display = "none";
            scanner.stop();


        });
        Instascan.Camera.getCameras().then(function (cameras) {
            if (cameras.length > 0) {
                scanner.start(cameras[0]);
            } else {
                console.error('No cameras found.');
            }
        }).catch(function (e) {
            console.error(e);
        });

    }


    function generateMultisignAddress() {
        swal.fire({
            title: 'Loading',
            html: 'Please Wait',
            onBeforeOpen: () => {
                Swal.showLoading()
            }
        });
        const data = {
            "pubkeys": [
                global_var.pebblePublicKey,
                global_var.userPublicKey

            ],
            "script_type": "multisig-2-of-2"
        };

        $.post(global_var.api_endpoint + global_var.networkType + '/addrs?token=' + global_var.token, JSON.stringify(data))
            .then(function (d) {
                console.log(d.address);
                document.getElementById("userAddress").innerHTML = d.address;
                $.get(global_var.api_endpoint + global_var.networkType + '/addrs/' + d.address + '/balance?token=' + global_var.token)
                    .then(function (d) {
                        document.getElementById("unConfirmedBalance").innerHTML = '$' + d.unconfirmed_balance;
                        document.getElementById("balance").innerHTML = '$ ' + d.balance;
                        swal.close()
                    });
            });
    }
</script>
<div class="wrapper ">
    <div class="sidebar" data-active-color="danger" data-color="white">
        <!--
          Tip 1: You can change the color of the sidebar using: data-color="blue | green | orange | red | yellow"
      -->
        <div class="logo">

            <a class="simple-text logo-normal" href="">
                <center>Pebble</center>
            </a>

        </div>
        <div class="sidebar-wrapper">
            <ul class="nav">
                <li class="active " style="color: #5bc0de">
                    <a href="#" style="color: #5bc0de" >
                        <i class="nc-icon nc-bank" style="color: #5bc0de"></i>
                        <p >PEBBLE NETWORK</p>
                    </a>
                </li>

                <li class="active-pro">
                    <a href="">
                        <i class="nc-icon nc-spaceship"></i>
                        <p>Pebble inc</p>
                    </a>
                </li>
            </ul>
        </div>
    </div>
    <div class="main-panel">
        <!-- Navbar -->
        <nav class="navbar navbar-expand-lg navbar-absolute fixed-top navbar-transparent">
            <div class="container-fluid">
                <div class="navbar-wrapper">
                    <div class="navbar-toggle">
                        <button class="navbar-toggler" type="button">
                            <span class="navbar-toggler-bar bar1"></span>
                            <span class="navbar-toggler-bar bar2"></span>
                            <span class="navbar-toggler-bar bar3"></span>
                        </button>
                    </div>
                    <a class="navbar-brand" href="#pablo">Decentralized Bitcoin Exchange</a>
                </div>
                <button aria-controls="navigation-index" aria-expanded="false" aria-label="Toggle navigation"
                        class="navbar-toggler" data-target="#navigation" data-toggle="collapse" type="button">
                    <span class="navbar-toggler-bar navbar-kebab"></span>
                    <span class="navbar-toggler-bar navbar-kebab"></span>
                    <span class="navbar-toggler-bar navbar-kebab"></span>
                </button>
                <div class="collapse navbar-collapse justify-content-end" id="navigation">

                    <ul class="navbar-nav">

                        <li class="nav-item btn-rotate dropdown">
                            <a aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle"
                               data-toggle="dropdown"
                               href="http://example.com" id="navbarDropdownMenuLink">
                                <i class="nc-icon nc-single-02"></i>
                                <p>
                                    <span class="d-lg-none d-md-block">Some Actions</span>
                                </p>
                            </a>
                            <div aria-labelledby="navbarDropdownMenuLink" class="dropdown-menu dropdown-menu-right">
                                <a class="dropdown-item" href="#">Logout</a>

                            </div>
                        </li>

                    </ul>
                </div>
            </div>
        </nav>
        <!-- End Navbar -->
        <!-- <div class="panel-header panel-header-lg">

    <canvas id="bigDashboardChart"></canvas>


    </div> -->
        <div class="content">
            <div class="row">
                <div class="col-lg-3 col-md-6 col-sm-6">
                    <div class="card card-stats">
                        <div class="card-body ">
                            <div class="row">
                                <div class="col-5 col-md-4">
                                    <div class="icon-big text-center icon-warning">
                                        <i class="nc-icon nc-cloud-upload-94 text-warning"></i>
                                    </div>
                                </div>
                                <div class="col-7 col-md-8">
                                    <div class="numbers">
                                        <p class="card-category" style="font-size: small">Unconfirmed Balance</p>
                                        <p class="card-title" id="unConfirmedBalance">
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-footer ">
                            <hr>
                            <div class="stats">
                                <i class="fa fa-refresh"></i> <a href="#" style="color: lightgray">Update Now</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 col-sm-6">
                    <div class="card card-stats">
                        <div class="card-body ">
                            <div class="row">
                                <div class="col-5 col-md-4">
                                    <div class="icon-big text-center icon-warning">
                                        <i class="nc-icon nc-money-coins text-success"></i>
                                    </div>
                                </div>
                                <div class="col-7 col-md-8">
                                    <div class="numbers">
                                        <p class="card-category">Confirmed Balance</p>
                                        <p class="card-title" id="balance">
                                        <p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-footer ">
                            <hr>
                            <div class="stats">
                                <i class="fa "></i>
                                <button type="button" id="withdraw" onclick="withdraw()" class="btn btn-sm btn-success btn-round"> Withdraw
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-lg-6 col-md-12 col-sm-6">
                    <div class="card card-stats">
                        <div class="card-body ">
                            <div class="row">
                                <div class="col-3 col-md-3">
                                    <div class="icon-big text-center icon-warning">
                                        <i class="nc-icon nc-badge text-primary"></i>
                                    </div>
                                </div>
                                <div class="col-9 col-md-9">
                                    <div class="numbers">
                                        <p class="card-category">Current Address :</p>
                                        <p style="font-size: 18px;" id="userAddress">

                                        <p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-footer ">
                            <hr>
                            <div class="stats">
                                <i class="fa fa-refresh"></i> <a href="#" onclick="enterPublicKey()" style="color:  darkgray">Change Address</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-5">
                    <div class="card card-signup text-center">
                        <div class="card-header ">
                            <h5 class="card-title">Trade Bitcoin</h5>
                            <p style="color: grey;font-size: medium">Pebble Balance: 0.000 BTC</p>
                            <a>
                                <!--<i class="fa fa-btc" style="font-size: 5em;color:#4C4C4C;"></i> --!>
                                <center><input type="number" inputmode="numeric" pattern="[0-9]*" class="form-control"
                                               id="btcNumber" onclick="clearval()" onmouseleave="isbtcvalnull()"
                                               style="border: none;border-bottom-color: transparent;font-size: 3em;text-align: center; "
                                               value="0.00 BTC"></center>
                            </a>


                        </div>
                        <div class="card-body ">
                            <form class="form" method="" action="" id="transactionForm">
                                <div class="input-group">
                                    <div class="input-group-prepend">
                        <span class="input-group-text">
                          <i class="nc-icon nc-single-02"></i>
                        </span>
                                    </div>
                                    <input type="text" class="form-control" placeholder="From">
                                </div>
                                <div class="input-group">
                                    <div class="input-group-prepend">
                        <span class="input-group-text">
                          <i class="nc-icon nc-circle-10"></i>
                        </span>
                                    </div>
                                    <input type="text" placeholder="To" class="form-control">
                                </div>
                                <div class="input-group">
                                    <div class="input-group-prepend">
                        <span class="input-group-text">
                          <i class="nc-icon nc-key-25"></i>
                        </span>
                                    </div>
                                    <input type="text" id="privateKeyInput" class="form-control"
                                           placeholder="Private key">&nbsp;&nbsp;
                                    <span title="Scan QR Code of Private Key"><a href="#"
                                                                                 style="color: grey;text-decoration: none;"
                                                                                 onclick="scanPrivateKeyID()"> <i
                                            href="#" class="fa fa-camera fa-3x " aria-hidden="true"></i></a></span>
                                </div>
                                <button class="btn btn-info  btn-lg" style="width: 100%"><i
                                        class="fa fa-lock fa-lg"></i>&nbsp;Pay
                                </button>
                            </form>
                        </div>
                        <div class="card-footer ">

                        </div>
                    </div>
                </div>
                <div class="col-md-7">
                    <div class="card ">
                        <div class="card-header ">
                            <h5 class="card-title">Server Locations</h5>
                        </div>
                        <div class="card-body ">
                            <div id="worldMap" class="map map-big" style="height: 26em"></div>
                        </div>
                        <div class="card-footer ">
                            <hr>

                        </div>
                    </div>
                </div>

            </div>

            <div class="row">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header">
                            <center><h4 class="card-title" id="optionHead"> Recent Transactions</h4>
                                <div class="btn-group" role="group" aria-label="Button group with nested dropdown">
                                    <div class="btn-group" role="group">
                                        <button id="btnGroupDrop1" type="button"
                                                class="btn btn-info btn-outline-info btn-round btn-sm dropdown-toggle"
                                                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                            Option 1
                                        </button>
                                        <div class="dropdown-menu" aria-labelledby="btnGroupDrop1">
                                            <a class="dropdown-item" id="option1" onclick="maketableoption1()" href="#">Option
                                                1</a>
                                            <a class="dropdown-item" id="option2" onclick="maketableoption2()" href="#">Option
                                                2</a>
                                        </div>
                                    </div>
                                </div>
                            </center>
                        </div>
                        <hr>
                        <div class="card-body">

                            <div class="table-responsive table-striped" style="overflow: hidden;">
                                <table class="table">
                                    <thead class=" text-primary">
                                    <th>
                                        contract id
                                    </th>
                                    <th>
                                        status
                                    </th>
                                    <th>
                                        transaction id
                                    </th>
                                    <th class="text-right">
                                        Amount
                                    </th>
                                    </thead>
                                    <tbody id="myTable">

                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="assets/js/core/jquery.min.js"></script>
<script src="assets/js/core/popper.min.js"></script>
<script src="assets/js/core/bootstrap.min.js"></script>
<script src="assets/js/plugins/perfect-scrollbar.jquery.min.js"></script>
<script src="assets/js/plugins/moment.min.js"></script>
<!--  Plugin for Switches, full documentation here: http://www.jque.re/plugins/version3/bootstrap.switch/ -->
<script src="assets/js/plugins/bootstrap-switch.js"></script>
<!--  Plugin for Sweet Alert -->
<script src="assets/js/plugins/sweetalert2.min.js"></script>
<!-- Forms Validations Plugin -->
<script src="assets/js/plugins/jquery.validate.min.js"></script>
<!--  Plugin for the Wizard, full documentation here: https://github.com/VinceG/twitter-bootstrap-wizard -->
<script src="assets/js/plugins/jquery.bootstrap-wizard.js"></script>
<!--	Plugin for Select, full documentation here: http://silviomoreto.github.io/bootstrap-select -->
<script src="assets/js/plugins/bootstrap-selectpicker.js"></script>
<!--  Plugin for the DateTimePicker, full documentation here: https://eonasdan.github.io/bootstrap-datetimepicker/ -->
<script src="assets/js/plugins/bootstrap-datetimepicker.js"></script>
<!--  DataTables.net Plugin, full documentation here: https://datatables.net/    -->
<script src="assets/js/plugins/jquery.dataTables.min.js"></script>
<!--	Plugin for Tags, full documentation here: https://github.com/bootstrap-tagsinput/bootstrap-tagsinputs  -->
<script src="assets/js/plugins/bootstrap-tagsinput.js"></script>
<!-- Plugin for Fileupload, full documentation here: http://www.jasny.net/bootstrap/javascript/#fileinput -->
<script src="assets/js/plugins/jasny-bootstrap.min.js"></script>
<!--  Full Calendar Plugin, full documentation here: https://github.com/fullcalendar/fullcalendar    -->
<script src="assets/js/plugins/fullcalendar/fullcalendar.min.js"></script>
<script src="assets/js/plugins/fullcalendar/daygrid.min.js"></script>
<script src="assets/js/plugins/fullcalendar/timegrid.min.js"></script>
<script src="assets/js/plugins/fullcalendar/interaction.min.js"></script>
<!-- Vector Map plugin, full documentation here: http://jvectormap.com/documentation/ -->
<script src="assets/js/plugins/jquery-jvectormap.js"></script>
<!--  Plugin for the Bootstrap Table -->
<script src="assets/js/plugins/nouislider.min.js"></script>
<!--  q    -->
<script src="https://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js"></script>
<!-- Chart JS -->
<script src="assets/js/plugins/chartjs.min.js"></script>
<!--  Notifications Plugin    -->
<script src="assets/js/plugins/bootstrap-notify.js"></script>
<!-- Control Center for Now Ui Dashboard: parallax effects, scripts for the example pages etc -->
<script src="assets/js/paper-dashboard.min.js?v=2.1.1" type="text/javascript"></script>
<!-- Paper Dashboard DEMO methods, don't include it in your project! -->
<script src="assets/demo/demo.js"></script>
<script>
    function generatePublicKey() {
        console.log("akjfajefioaweoifhw");
        swal.close();
        Swal.showLoading({
            grow: "row",
        });

        function timeFunction() {
            setTimeout(function () {
            }, 5000);
        }

        Swal.fire({
            allowEscapeKey: false,
            allowOutsideClick: false,
            grow: "row",
            title: `Key downloaded`,
            confirmButtonText: "I Understand",
            html: "KEEP YOU'RE PUBLIC KEY SAFE <br><br><b> NEVER SHARE YOUR KEY</b>",
            icon: "success"
        })
    }

    $(document).ready(function () {
        // Javascript method's body can be found in assets/assets-for-demo/js/demo.js

        demo.initVectorMap();


        let data = [
            {
                'contractID': '135kwA2pGQRC4DzCA8vqBrhBvn4Raw4u8w',
                'status': 'success',
                'transactionID': 'a937711064b6560013057b8e077fedcba788e88bddba4f45f6222fb455ba6752',
                'amount': '$36,738'
            },
            {
                'contractID': '135kwA2pGQRC4DzCA8vqBrhBvn4Raw4u8w',
                'status': 'success',
                'transactionID': 'a937711064b6560013057b8e077fedcba788e88bddba4f45f6222fb455ba6752',
                'amount': '$36,738'
            },
            {
                'contractID': '135kwA2pGQRC4DzCA8vqBrhBvn4Raw4u8w',
                'status': 'success',
                'transactionID': 'a937711064b6560013057b8e077fedcba788e88bddba4f45f6222fb455ba6752',
                'amount': '$36,738'
            },
            {
                'contractID': '135kwA2pGQRC4DzCA8vqBrhBvn4Raw4u8w',
                'status': 'success',
                'transactionID': 'a937711064b6560013057b8e077fedcba788e88bddba4f45f6222fb455ba6752',
                'amount': '$36,738'
            },
            {
                'contractID': '135kwA2pGQRC4DzCA8vqBrhBvn4Raw4u8w',
                'status': 'success',
                'transactionID': 'a937711064b6560013057b8e077fedcba788e88bddba4f45f6222fb455ba6752',
                'amount': '$36,738'
            },
            {
                'contractID': '135kwA2pGQRC4DzCA8vqBrhBvn4Raw4u8w',
                'status': 'success',
                'transactionID': 'a937711064b6560013057b8e077fedcba788e88bddba4f45f6222fb455ba6752',
                'amount': '$36,738'
            },
            {
                'contractID': '135kwA2pGQRC4DzCA8vqBrhBvn4Raw4u8w',
                'status': 'success',
                'transactionID': 'a937711064b6560013057b8e077fedcba788e88bddba4f45f6222fb455ba6752',
                'amount': '$36,738'
            }
        ];

        buildTable(data);

        function buildTable(data) {
            let table = document.getElementById("myTable")
            for (let i = 0; i < data.length; i++) {
                let row = '<tr>' +
                    ' <td >' +
                    "To  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :" + '&nbsp;<a style="color: gray">' + data[i].contractID + '</a>' +
                    '<br>' +
                    '<br>' +
                    "From :" + '&nbsp;<a style="color: #5cb85c">' + data[i].contractID + '</a>' +
                    '</td>' +
                    '<td>' +
                    '  <span class="badge badge-success">' +
                    data[i].status +
                    '</span>' +
                    '  </td>' +
                    '  <td>' +
                    '<a  href="#" onclick="showInfo(this)" >' + i * 99999 + '</a>' +
                    ' </td>' +
                    '  <td class="text-right">' +
                    data[i].amount +
                    ' </td>' +
                    '</tr>'
                table.innerHTML += row;
            }
        }
    });

    function maketableoption1() {
        document.getElementById("optionHead").innerHTML = "option1 Transactions"
    }
    function maketableoption2() {
        document.getElementById("optionHead").innerHTML = "option2 Transactions"
    }
    function clearval() {
        document.getElementById("btcNumber").value = "";
    }
    function qrscanner(id,preview) {
        let scanner = new Instascan.Scanner({video: document.getElementById(preview)});
        scanner.addListener('scan', function (content) {

            content = content.replace("bitcoin:", "");
            document.getElementById(id).value = content;
            scanner.stop();
            document.getElementById(preview).style.display = "none";
            setTimeout(
                function() {
                    scanner.stop();
                }, 3000);

        });
        Instascan.Camera.getCameras().then(function (cameras) {
            if (cameras.length > 0) {
                scanner.start(cameras[0]);
            } else {
                console.error('No cameras found.');
            }
        }).catch(function (e) {
            console.error(e);
        });

    }
    function isbtcvalnull() {
        if (document.getElementById("btcNumber").value === "") {
            document.getElementById("btcNumber").value = "0.00";
        }
    }
    function showInfo(element) {

        console.log("clicked")
        let val = element.innerHTML;
        Swal.fire(val)
    }
    function scanPrivateKeyID() {
        Swal.fire({
            showConfirmButton: false,
            showCancelButton: true,
            html:
                '<video id="preview2" width="320" height="240"></video>',
            onClose: () => {
                scanner.stop();
            }
        });
        let scanner = new Instascan.Scanner({video: document.getElementById('preview2')});
        scanner.addListener('scan', function (content) {

            content = content.replace("bitcoin:", "");
            document.getElementById('privateKeyInput').value = content;
            scanner.stop();
            document.getElementById("preview2").style.display = "none";
            swal.close();

        });
        Instascan.Camera.getCameras().then(function (cameras) {
            if (cameras.length > 0) {
                scanner.start(cameras[0]);
            } else {
                scanner.stop();
                console.error('No cameras found.');
            }
        }).catch(function (e) {
            scanner.stop();
            console.error(e);
        });

    }
    function enterPublicKey(){
        let netType=global_var.networkType;
        Swal.fire({

            allowOutsideClick: true,
            allowEscapeKey: false,
            grow: 'row',
            confirmButtonText: 'Submit',
            title: "",

            html:
                '<video id="preview" width="320" height="240"></video>' +
                '<div class="label"><span title="What do u wanna write here?"><h5>Enter new Public key :</h5> </span></div>' +
                '<form><input required="required" id="swal-input1" class="swal2-input" style="width: 40%"> <br>',


            footer: '<button type="button" id="scan" onclick="scanner()" class="swal2-styled swal2-cancel">Scan Public Key QR Code</button>',

            preConfirm: () => {
                global_var.userPublicKey = document.getElementById('swal-input1').value;
                generateMultisignAddress();
                if (!global_var.userPublicKey) {
                    Swal.showValidationMessage(
                        "Public Key cannot be left blank"
                    )
                } else {
                    console.log(global_var)
                    return {
                        networkType: netType,
                        publicKey: document.getElementById('swal-input1').value,
                    }
                }
            },
        });

    };
    function withdraw() {
        Swal.fire({

            allowOutsideClick: true,
            allowEscapeKey: false,

            confirmButtonText: 'Submit',
            title: "",

            html:
                '<video id="preview3" width="320" height="240"></video>' +
                '<div class="label"><h5>Enter Address:</h5></div>' +
                '<form><input required="required" id="withdrawAddress" class="swal2-input" style="width: 100%"> <br>',


            footer: '<button type="button" id="scan"  class="swal2-styled swal2-cancel">Scan QR Code</button>',

            onBeforeOpen:()=>{
                document.getElementById('scan').addEventListener("click",()=>{
                    qrscanner('withdrawAddress','preview3');
                })
            },
            preConfirm: () => {

                withdrawAddr = document.getElementById('withdrawAddress').value;

                if (!global_var.userPublicKey) {
                    Swal.showValidationMessage(
                        "Public Key cannot be left blank"
                    )
                } else {
                    console.log(global_var)
                    return {
                        networkType: netType,
                        publicKey: document.getElementById('swal-input1').value,
                    }
                }
            },
        });
    }

</script>
</body>

</html>
